<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Road Weather Conditions and Forecasts for Uintah Basin">
    <title>Road Weather - Uintah Basin</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- CSS -->
    <link rel="stylesheet" href="/public/css/main.css">
    <link rel="stylesheet" href="/public/css/roads.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
</head>
<body data-page-type="roads">
    <!-- Colored Bar -->
    <div class="colored-bar"></div>

    <!-- Sidebar Container -->
    <div class="sidebar_container">
        <!-- Sidebar will be loaded here via loadSidebar.js -->
    </div>

    <!-- Main Content -->
    <main class="content">
        <h1>Road Weather Conditions</h1>

        <!-- Full-Screen Map with Bottom Condition Cards -->
        <section class="road-weather-dashboard">
            <div class="map-container-fullscreen">
                <div id="road-map" class="road-network-map"></div>

                <!-- Instructions removed to prevent blocking map interaction -->

                <!-- Bottom condition cards overlay -->
                <div class="conditions-overlay">
                    <div class="condition-cards-horizontal">
                        <div class="condition-card-compact road-temp">
                            <div class="card-icon-small">
                                <i class="fas fa-road"></i>
                            </div>
                            <div class="card-data">
                                <h5>Road Surface</h5>
                                <p class="value">--Â°F</p>
                            </div>
                        </div>

                        <div class="condition-card-compact visibility">
                            <div class="card-icon-small">
                                <i class="fas fa-eye"></i>
                            </div>
                            <div class="card-data">
                                <h5>Visibility</h5>
                                <p class="value">-- mi</p>
                            </div>
                        </div>

                        <div class="condition-card-compact precipitation">
                            <div class="card-icon-small">
                                <i class="fas fa-cloud-rain"></i>
                            </div>
                            <div class="card-data">
                                <h5>Precipitation</h5>
                                <p class="value">--</p>
                            </div>
                        </div>

                        <div class="condition-card-compact wind">
                            <div class="card-icon-small">
                                <i class="fas fa-wind"></i>
                            </div>
                            <div class="card-data">
                                <h5>Wind</h5>
                                <p class="value">-- mph</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Units Toggle -->
                <div class="units-toggle-container">
                    <button class="units-toggle" id="units-toggle" title="Toggle between Imperial and Metric units">
                        <i class="fas fa-thermometer-half"></i>
                        <span id="units-label">Imperial</span>
                        <i class="fas fa-exchange-alt"></i>
                    </button>
                </div>
            </div>
        </section>

        <!-- Route-Specific Forecasts -->
        <div class="routes-container">
            <!-- US-40 Corridor -->
            <section class="route-section" id="us40-section">
                <h2><i class="fas fa-route"></i> US-40 Corridor</h2>
                <div class="route-content">
                    <div class="route-details">
                        <p><strong>Roosevelt to Vernal:</strong> Primary east-west route through Basin</p>
                        <div class="route-conditions" id="us40-conditions">
                            <div class="conditions-loading">
                                <i class="fas fa-spinner fa-spin"></i>
                                <p>Loading current conditions...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- US-191 North-South -->
            <section class="route-section" id="us191-section">
                <h2><i class="fas fa-route"></i> US-191 North-South</h2>
                <div class="route-content">
                    <div class="route-details">
                        <p><strong>Vernal to Duchesne:</strong> Major north-south connector with elevation changes</p>
                        <div class="route-conditions" id="us191-conditions">
                            <div class="conditions-loading">
                                <i class="fas fa-spinner fa-spin"></i>
                                <p>Loading current conditions...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Local Basin Roads -->
            <section class="route-section" id="basin-roads-section">
                <h2>
                    <i class="fas fa-map-signs"></i> Local Basin Roads
                    <div class="road-carousel-header">
                        <span class="current-road-name" id="current-road-name">Loading...</span>
                        <div class="carousel-controls">
                            <button class="carousel-btn prev-btn" id="prev-road" title="Previous road">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <div class="carousel-indicators" id="carousel-indicators">
                                <!-- Indicators will be dynamically added -->
                            </div>
                            <button class="carousel-btn next-btn" id="next-road" title="Next road">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </h2>
                <div class="route-content">
                    <div class="route-details">
                        <p><strong>Auto-rotating display:</strong> <span class="road-description" id="road-description">Secondary routes and local access roads</span></p>
                        <div class="route-conditions carousel-container" id="basin-roads-conditions">
                            <div class="conditions-loading">
                                <i class="fas fa-spinner fa-spin"></i>
                                <p>Loading current conditions...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Travel Advisory Section -->
        <section class="advisory-section">
            <h2><i class="fas fa-exclamation-triangle"></i> Travel Advisories</h2>
            <!-- Traffic Events Dashboard -->
            <div class="traffic-events-container">
                <div class="events-tabs">
                    <button class="tab-btn active" data-tab="active">Active Events</button>
                    <button class="tab-btn" data-tab="upcoming">Upcoming</button>
                    <button class="tab-btn" data-tab="all">All Events</button>
                </div>

                <div class="events-content">
                    <div class="tab-content active" id="active-events">
                        <div class="events-loading">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Loading active traffic events...</p>
                        </div>
                    </div>

                    <div class="tab-content" id="upcoming-events">
                        <div class="events-loading">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Loading upcoming events...</p>
                        </div>
                    </div>

                    <div class="tab-content" id="all-events">
                        <div class="events-loading">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Loading all traffic events...</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- UDOT Alerts Section -->
        <section class="udot-alerts-section">
            <div class="udot-alerts">
                <h3><i class="fas fa-bell"></i> UDOT Alerts</h3>
                <div id="alerts-container">
                    <div class="alerts-loading">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Loading UDOT alerts...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- External Resources -->
        <section class="resources-section">
            <h2><i class="fas fa-external-link-alt"></i> Additional Resources</h2>
            <div class="resources-grid">
                <div class="resource-card">
                    <h3>UDOT CommuterLink</h3>
                    <p>Real-time road conditions and camera feeds</p>
                    <a href="https://commuterlink.utah.gov/" target="_blank" rel="noopener">
                        <i class="fas fa-external-link-alt"></i> Visit UDOT
                    </a>
                </div>
                <div class="resource-card">
                    <h3>Utah Road Weather</h3>
                    <p>Statewide road weather information</p>
                    <a href="https://www.weather.gov/slc/winter" target="_blank" rel="noopener">
                        <i class="fas fa-external-link-alt"></i> NWS Road Weather
                    </a>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="main-footer">
        <div class="footer-content">
            <p>&copy; 2024 Bingham Research Center. Road weather forecasts are for reference only. All rights reserved.</p>
        </div>
    </footer>

    <!-- Emma Park Road Easter Egg -->
    <div class="emma-park-easter-egg" id="emma-park-box">
        <div class="easter-egg-toggle" id="easter-egg-toggle">
            <i class="fas fa-chevron-down" id="toggle-icon"></i>
            <span>What about Emma Park Road?</span>
        </div>
        <div class="easter-egg-content" id="easter-egg-content">
            <p>Answers to the Basin's most burning question at:
                <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank" rel="noopener">
                    www.IsEmmaParkRoadClosed.utah
                </a>
            </p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script type="module" src="/public/js/loadSidebar.js"></script>
    <script src="/public/js/roads.js"></script>
</body>
</html>